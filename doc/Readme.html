
<!DOCTYPE html>
<html lang="en" dir="ltr" class="client-nojs">
<head>
<title>Java API Compliance Checker - Readme</title>
<meta charset="UTF-8" />
<meta name="generator" content="MediaWiki 1.18.1" />
<link rel="shortcut icon" href="/favicon.ico" />
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ISP_RAS (en)" />
<link rel="EditURI" type="application/rsd+xml" href="http://ispras.linuxbase.org/api.php?action=rsd" />
<link rel="alternate" type="application/atom+xml" title="ISP_RAS Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom" />
<link rel="stylesheet" href="/load.php?debug=false&amp;lang=en&amp;modules=mediawiki.legacy.commonPrint%2Cshared%7Cskins.monobook&amp;only=styles&amp;skin=monobook&amp;*" />
<meta name="ResourceLoaderDynamicStyles" content="" />
<link rel="stylesheet" href="/load.php?debug=false&amp;lang=en&amp;modules=site&amp;only=styles&amp;skin=monobook&amp;*" />
<style>a:lang(ar),a:lang(ckb),a:lang(fa),a:lang(kk-arab),a:lang(mzn),a:lang(ps),a:lang(ur){text-decoration:none}a.new,#quickbar a.new{color:#ba0000}
</style>
<script src="/load.php?debug=false&amp;lang=en&amp;modules=startup&amp;only=scripts&amp;skin=monobook&amp;*"></script>
<script>if(window.mw){
	mw.config.set({"wgCanonicalNamespace": "", "wgCanonicalSpecialPageName": false, "wgNamespaceNumber": 0, "wgPageName": "Java_API_Compliance_Checker", "wgTitle": "Java API Compliance Checker", "wgCurRevisionId": 8724, "wgArticleId": 2598, "wgIsArticle": true, "wgAction": "view", "wgUserName": null, "wgUserGroups": ["*"], "wgCategories": ["Java API Compliance Checker"], "wgBreakFrames": false, "wgRestrictionEdit": [], "wgRestrictionMove": []});
}
</script><script>if(window.mw){
	mw.loader.load(["mediawiki.page.startup"]);
}
</script>
</head>
<body class="mediawiki ltr sitedir-ltr ns-0 ns-subject page-Java_API_Compliance_Checker action-view skin-monobook">
<div id="globalWrapper">
<div id="column-content"><div id="content">
	<a id="top"></a>
	
	<h1 id="firstHeading" class="firstHeading">Java API Compliance Checker</h1>
	<div id="bodyContent">
<div lang="en" dir="ltr" class="mw-content-ltr"><p><i>Java API Compliance Checker (Java APICC)</i> is a tool for checking backward <b>binary</b> and <b>source-level compatibility</b> of a Java library API. The tool checks classes declarations of old and new versions and analyzes changes that may break compatibility: removed methods, removed class fields, added abstract methods, etc. The HTML compatibility report generated by this tool include separate sections for both source and binary compatibility analysis and exact error messages of the jvm and the compiler for each break found in the API.
</p><p>Binary incompatibility may result in crashing or incorrect behavior of existing clients built with an old version of a library when they are running with a new one. Source incompatibility may result in recompilation errors with a new library version. The tool is intended for developers of software libraries and Linux maintainers who are interested in ensuring backward compatibility, i.e. allow old clients to run or to be recompiled with newer library versions.
</p>
<table id="toc" class="toc"><tr><td><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Downloads"><span class="tocnumber">1</span> <span class="toctext">Downloads</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#License"><span class="tocnumber">2</span> <span class="toctext">License</span></a></li>
<li class="toclevel-1 tocsection-3"><a href="#Supported_Platforms"><span class="tocnumber">3</span> <span class="toctext">Supported Platforms</span></a></li>
<li class="toclevel-1 tocsection-4"><a href="#System_Requirements"><span class="tocnumber">4</span> <span class="toctext">System Requirements</span></a></li>
<li class="toclevel-1 tocsection-5"><a href="#Detectable_Compatibility_Problems"><span class="tocnumber">5</span> <span class="toctext">Detectable Compatibility Problems</span></a></li>
<li class="toclevel-1 tocsection-6"><a href="#Installation"><span class="tocnumber">6</span> <span class="toctext">Installation</span></a></li>
<li class="toclevel-1 tocsection-7"><a href="#Usage"><span class="tocnumber">7</span> <span class="toctext">Usage</span></a>
<ul>
<li class="toclevel-2 tocsection-8"><a href="#Compare_Java_Archives"><span class="tocnumber">7.1</span> <span class="toctext">Compare Java Archives</span></a></li>
<li class="toclevel-2 tocsection-9"><a href="#Compare_Multiple_Archives"><span class="tocnumber">7.2</span> <span class="toctext">Compare Multiple Archives</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-10"><a href="#Adv._Usage"><span class="tocnumber">8</span> <span class="toctext">Adv. Usage</span></a>
<ul>
<li class="toclevel-2 tocsection-11"><a href="#Check_Clients_Portability"><span class="tocnumber">8.1</span> <span class="toctext">Check Clients Portability</span></a></li>
<li class="toclevel-2 tocsection-12"><a href="#Create_API_Dump"><span class="tocnumber">8.2</span> <span class="toctext">Create API Dump</span></a></li>
<li class="toclevel-2 tocsection-13"><a href="#Command-Line_Options"><span class="tocnumber">8.3</span> <span class="toctext">Command-Line Options</span></a></li>
<li class="toclevel-2 tocsection-14"><a href="#Examples"><span class="tocnumber">8.4</span> <span class="toctext">Examples</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-15"><a href="#Report_Format"><span class="tocnumber">9</span> <span class="toctext">Report Format</span></a></li>
<li class="toclevel-1 tocsection-16"><a href="#Examples_2"><span class="tocnumber">10</span> <span class="toctext">Examples</span></a></li>
<li class="toclevel-1 tocsection-17"><a href="#Verdict_on_Compatibility"><span class="tocnumber">11</span> <span class="toctext">Verdict on Compatibility</span></a></li>
<li class="toclevel-1 tocsection-18"><a href="#Error_Codes"><span class="tocnumber">12</span> <span class="toctext">Error Codes</span></a></li>
<li class="toclevel-1 tocsection-19"><a href="#Similar_Tools"><span class="tocnumber">13</span> <span class="toctext">Similar Tools</span></a></li>
<li class="toclevel-1 tocsection-20"><a href="#Bugs"><span class="tocnumber">14</span> <span class="toctext">Bugs</span></a></li>
<li class="toclevel-1 tocsection-21"><a href="#Developers"><span class="tocnumber">15</span> <span class="toctext">Developers</span></a></li>
<li class="toclevel-1 tocsection-22"><a href="#Articles"><span class="tocnumber">16</span> <span class="toctext">Articles</span></a></li>
</ul>
</td></tr></table>
<h2> <span class="mw-headline" id="Downloads"> Downloads </span></h2>
<p>The tool can be downloaded from <b><a rel="nofollow" class="external text" href="https://github.com/lvc/japi-compliance-checker/">github.com</a></b>.
</p>
<h2> <span class="mw-headline" id="License"> License </span></h2>
<p>This program is free software. You may use, redistribute and/or modify it under the terms of either the <b>GNU GPL</b> or <b>LGPL</b>.
</p>
<h2> <span class="mw-headline" id="Supported_Platforms"> Supported Platforms </span></h2>
<p>Linux, FreeBSD, Mac OS X, MS Windows.
</p>
<h2> <span class="mw-headline" id="System_Requirements"> System Requirements </span></h2>
<p>The tool requires:
</p>
<ul><li> <b>JDK - development files</b> (javap, javac)
</li><li> <b>Perl 5</b> (5.8 or newer)
</li></ul>
<h2> <span class="mw-headline" id="Detectable_Compatibility_Problems"> Detectable Compatibility Problems </span></h2>
<p>The tool searches for the following list of changes in the API that may break <b>binary/source-level</b> compatibility. See <a rel="nofollow" class="external text" href="http://wiki.eclipse.org/Evolving_Java-based_APIs_2">“Evolving Java-based APIs: Achieving API Binary Compatibility”</a> and <a href="/index.php/Java_API_Compliance_Checker#Articles" title="Java API Compliance Checker">this list</a> of articles for more info.
</p>
<ul><li> <b>Problems with Data Types</b>
<ul><li> <b>Classes</b> and <b>Interfaces</b>
<ul><li> removed classes or interfaces
</li><li> removed fields
</li><li> removed methods
</li><li> change of a field type
</li><li> change of a field access level
</li><li> change of a field attributes (final, static, etc.)
</li><li> change of a constant field value
</li><li> changes in fields (recursive analysis)
</li><li> added/removed abstract methods
</li><li> added/removed super-interfaces
</li></ul>
</li><li> <b>Classes</b>
<ul><li> added/removed super-classes
</li><li> moving a method up class hierarchy
</li><li> overridden methods
</li></ul>
</li></ul>
</li><li> <b>Problems with Methods</b>
<ul><li> changed attributes (static, final, synchronized, abstract, etc.)
</li><li> changed access level
</li><li> added/removed exceptions
</li></ul>
</li><li> <b>Problems with Annotations</b>
<ul><li> removed annotations
</li></ul>
</li></ul>
<h2> <span class="mw-headline" id="Installation"> Installation </span></h2>
<p>The tool is <b>ready-to-use</b> after extracting the archive. You can also use a Makefile to install the tool into the system:<br />
<code style="border: dashed 1px gray; background-color: #f0f0f0;">&#160;cd japi-compliance-checker-x.y.z/&#160;</code><br />
<code style="border: dashed 1px gray; background-color: #f0f0f0;">&#160;sudo make install prefix=PREFIX [/usr, /usr/local, ...]&#160;</code>
</p><p>This command will install a <code style="border: dashed 1px gray; background-color: #f0f0f0;">&#160;japi-compliance-checker&#160;</code> program into the <code style="border: dashed 1px gray; background-color: #f0f0f0;">&#160;PREFIX/bin&#160;</code> system directory.
</p><p>To verify that the tool is installed correctly and it works on your host run:<br />
<code style="border: dashed 1px gray; background-color: #f0f0f0;">&#160;cd tmp/&#160;</code><br />
<code style="border: dashed 1px gray; background-color: #f0f0f0;">&#160;japi-compliance-checker -test&#160;</code>
</p>
<h2> <span class="mw-headline" id="Usage"> Usage </span></h2>
<h3> <span class="mw-headline" id="Compare_Java_Archives"> Compare Java Archives </span></h3>
<p>Use the following command to compare two Java archives:<br />
&#160;&#160;<code style="border: dashed 1px gray; background-color: #f0f0f0;">&#160;japi-compliance-checker <i>V1.jar</i> <i>V2.jar</i>&#160;</code>
</p><p>The compatibility report will be generated to:<br />
&#160;&#160;<code style="border: dashed 1px gray; background-color: #f0f0f0;">&#160;compat_reports/<i>NAME</i>/<i>V1</i>_to_<i>V2</i>/compat_report.html&#160;</code>
</p>
<h3> <span class="mw-headline" id="Compare_Multiple_Archives"> Compare Multiple Archives </span></h3>
<p>To compare different versions of a library that consists of many JARs  you should create <b><a href="./Descriptor.html" title="Java Library Descriptor">XML descriptors</a></b> for two library versions: <b><a href="./Descriptor.html" title="Java Library Descriptor">v1.xml</a></b> and <b><a href="./Descriptor.html" title="Java Library Descriptor">v2.xml</a></b> files. Library descriptor is a simple XML-file that specifies version number, paths to Java ARchives and other optional information. An example of the descriptor is the following (1.0.xml):
</p>
<pre> <span style="color:Green;">&lt;version&gt;</span>
     1.0
 <span style="color:Green;">&lt;/version&gt;</span>
 
 <span style="color:Green;">&lt;archives&gt;</span>
     /path1/to/JAR(s)/
     /path2/to/JAR(s)/
       ...
 <span style="color:Green;">&lt;/archives&gt;</span>
</pre>
<p>Command to compare two versions of a library:<br />
&#160;&#160;<code style="border: dashed 1px gray; background-color: #f0f0f0;">&#160;japi-compliance-checker -lib <i>NAME</i> -old <i><a href="./Descriptor.html" title="Java Library Descriptor">V1.xml</a></i> -new <i><a href="./Descriptor.html" title="Java Library Descriptor">V2.xml</a></i>&#160;</code>
</p><p>The compatibility report will be generated to:<br />
&#160;&#160;<code style="border: dashed 1px gray; background-color: #f0f0f0;">&#160;compat_reports/<i>NAME</i>/<i>V1</i>_to_<i>V2</i>/compat_report.html&#160;</code>
</p>
<h2> <span class="mw-headline" id="Adv._Usage"> Adv. Usage </span></h2>
<h3> <span class="mw-headline" id="Check_Clients_Portability"> Check Clients Portability </span></h3>
<p>Command to check a client portability to a newer version of a Java library API:<br />
&#160;&#160;<code style="border: dashed 1px gray; background-color: #f0f0f0;">&#160;japi-compliance-checker -lib <i>NAME</i> -old <i><a href="./Descriptor.html" title="Java Library Descriptor">V1.xml</a></i> -new <i><a href="./Descriptor.html" title="Java Library Descriptor">V2.xml</a></i> -client <i>CLIENT.jar</i>&#160;</code>
</p>
<h3> <span class="mw-headline" id="Create_API_Dump"> Create API Dump </span></h3>
<p>Command to dump a Java library API to gzipped TXT-format file (API dump):<br />
&#160;&#160;<code style="border: dashed 1px gray; background-color: #f0f0f0;">&#160;japi-compliance-checker -lib <i>NAME</i> -dump <i><a href="./Descriptor.html" title="Java Library Descriptor">VER.xml</a></i>&#160;</code>
</p><p>The API dump will be generated to:<br />
&#160;&#160;<code style="border: dashed 1px gray; background-color: #f0f0f0;">&#160;api_dumps/<i>NAME</i>/<i>NAME</i>_<i>VER</i>.api.tar.gz&#160;</code><br />
</p>
<h3> <span class="mw-headline" id="Command-Line_Options"> Command-Line Options </span></h3>
<p>See the list of supported options in the output of -help option.
</p>
<h3> <span class="mw-headline" id="Examples"> Examples </span></h3>
<p>Check the JDO library API versions for compatibility:<br />
&#160;&#160;<code style="border: dashed 1px gray; background-color: #f0f0f0;">&#160;japi-compliance-checker jdo-api-2.0.jar jdo-api-3.0.jar&#160;</code><br /><br />
The report will be generated to:<br />
&#160;&#160;<code style="border: dashed 1px gray; background-color: #f0f0f0;">&#160;compat_reports/jdo/2.0_to_3.0/compat_report.html&#160;</code><br /><br />
Dump library API:<br />
&#160;&#160;<code style="border: dashed 1px gray; background-color: #f0f0f0;">&#160;japi-compliance-checker -l jdo -dump jdo-api-2.0.jar&#160;</code><br /><br />
The API dump will be generated to:<br />
&#160;&#160;<code style="border: dashed 1px gray; background-color: #f0f0f0;">&#160;api_dumps/jdo/jdo_2.0.api.tar.gz&#160;</code><br /><br />
Check client application portability between JDO versions:<br />
&#160;&#160;<code style="border: dashed 1px gray; background-color: #f0f0f0;">&#160;japi-compliance-checker -l jdo -old jdo-api-2.0.jar -new jdo-api-3.0.jar -client Teller.jar&#160;</code><br />
</p>
<h2> <span class="mw-headline" id="Report_Format"> Report Format </span></h2>
<p>The HTML-format compatibility report consists of:
</p>
<ul><li> <b>Test Info</b> - The library name and compared version numbers.
</li><li> <b>Test Results</b> - Verdict on compatibility. Number of archives, classes and methods checked by the tool.
</li><li> <b>Problem Summary</b> - Classification of compatibility problems.
</li><li> <b>Added Methods</b> - The list of added methods.
</li><li> <b>Removed Methods</b> - The list of removed methods.
</li><li> <b>Problems with Data Types</b> - List of compatibility problems caused by changes in data types (divided by the severity level: High, Medium, Low). List of affected methods.
</li><li> <b>Problems with Methods</b> - The list of compatibility problems caused by changes in method parameters and attributes (divided by the severity level).
</li><li> <b>Other Changes in Data Types</b> - The list of compatible changes in data types.
</li><li> <b>Other Changes in Methods</b> - The list of compatible changes in methods.
</li></ul>
<h2> <span class="mw-headline" id="Examples_2"> Examples </span></h2>
<table class="wikitable">
<tr>
<th> Library
</th>
<th> Versions
</th>
<th> Report
</th></tr>
<tr align="left">
<td> JDO
</td>
<td> 2.2 to 3.0
</td>
<td> <a rel="nofollow" class="external text" href="http://upstream.rosalinux.ru/java/compat_reports/jdo/2.2_to_3.0/compat_report.html">report</a>
</td></tr>
<tr align="left">
<td> SLF4J
</td>
<td> 1.5.11 to 1.6.0
</td>
<td> <a rel="nofollow" class="external text" href="http://upstream.rosalinux.ru/java/compat_reports/slf4j/1.5.11_to_1.6.0/bin_compat_report.html">report</a>
</td></tr>
<tr align="left">
<td> Struts
</td>
<td> 2.1.6 to 2.1.8
</td>
<td> <a rel="nofollow" class="external text" href="http://upstream.rosalinux.ru/java/compat_reports/struts/2.1.6_to_2.1.8/src_compat_report.html">report</a>
</td></tr></table>
<h2> <span class="mw-headline" id="Verdict_on_Compatibility"> Verdict on Compatibility </span></h2>
<p>If the tool detected problems with high or medium level of severity or at least one removed method then the compatibility verdict is <b>incompatible</b> (otherwise <b>compatible</b>). Low-severity problems can be considered as <b>warnings</b> and don't affect the compatibility verdict unless the -strict option is specified.
</p>
<h2> <span class="mw-headline" id="Error_Codes"> Error Codes </span></h2>
<table class="wikitable">
<tr>
<th> Code
</th>
<th> Meaning
</th></tr>
<tr align="left">
<td> 0
</td>
<td> Compatible. The tool has run without any errors.
</td></tr>
<tr align="left">
<td> 1
</td>
<td> Incompatible. The tool has run without any errors.
</td></tr>
<tr align="left">
<td> 2
</td>
<td> Common error code (undifferentiated).
</td></tr>
<tr align="left">
<td> 3
</td>
<td> A system command is not found.
</td></tr>
<tr align="left">
<td> 4
</td>
<td> Cannot access input files.
</td></tr>
<tr align="left">
<td> 7
</td>
<td> Invalid input API dump.
</td></tr>
<tr align="left">
<td> 8
</td>
<td> Unsupported version of input API dump.
</td></tr>
<tr align="left">
<td> 9
</td>
<td> Cannot find a module.
</td></tr></table>
<h2> <span class="mw-headline" id="Similar_Tools">  Similar Tools </span></h2>
<ol><li> <b>Clirr</b> - checks Java libraries for binary and source compatibility with older releases
</li><li> <b>Japicmp</b> - a tool to compare two versions of a jar archive
</li><li> <b>Japitools</b> - test for compatibility between Java APIs
</li><li> <b>Jour</b> - Java API compatibility testing tools
</li><li> <b>Japi-checker</b> - a java API backward compatibility checker which works at binary level
</li><li> <b>SigTest</b> - Oracle's SigTest signature testing and API conformance tool
</li></ol>
<h2> <span class="mw-headline" id="Bugs"> Bugs </span></h2>
<p>Please post bug reports, feature requests and questions to the <a rel="nofollow" class="external text" href="https://github.com/lvc/japi-compliance-checker/issues">issue tracker</a>.
</p>
<h2> <span class="mw-headline" id="Developers"> Developers </span></h2>
<p>The tool is developed by <a rel="nofollow" class="external text" href="http://abi-laboratory.pro/">Andrey Ponomarenko</a>.
</p>
<h2> <span class="mw-headline" id="Articles"> Articles </span></h2>
<ol><li> <a rel="nofollow" class="external text" href="http://wiki.eclipse.org/Evolving_Java-based_APIs_2"><b>“Evolving Java-based APIs: Achieving API Binary Compatibility”</b></a>, Jim des Rivières
</li><li> <a rel="nofollow" class="external text" href="http://docs.oracle.com/javase/specs/jls/se8/html/jls-13.html"><b>“Binary Compatibility”</b></a>, Java Language Specification
</li><li> <a rel="nofollow" class="external text" href="https://blogs.oracle.com/darcy/entry/kinds_of_compatibility"><b>“Kinds of Compatibility: Source, Binary, and Behavioral”</b></a>, Joseph D. Darcy's Oracle Weblog
</li></ol>

</div></div></div></div></div></body></html>
